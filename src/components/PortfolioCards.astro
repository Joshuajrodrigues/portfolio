---
import { Image } from "astro:assets";
import Tags from "./Tags.astro";
import text from "../images/konitive.svg";
const {
  title,
  desp,
  defaultColor,
  flip = false,
  tags = [],
  visit = "",
  git = "",
  readmore = "",
  image = "",
} = Astro.props;
---
<script>
  const colors = [
    "bg-pink-400",
    "bg-teal-400",
    "bg-orange-400",
    "bg-blue-400",
    "bg-purple-400",
  ];
  
    const cards = document.querySelectorAll<HTMLParagraphElement>(".chamaleon");
  
  
    cards.forEach((card) => {
  
      card.addEventListener("click", () => {
        changeColors(card)
      });
      card.addEventListener("touchstart", () => {
        changeColors(card)
      });
    });
  
    const changeColors=(card:HTMLParagraphElement)=>{
      let currentColor = card.classList.value.split(" ").at(-1);
        let filteredColors = colors.filter((color) => color !== currentColor);
        //   console.log("currentColor",currentColor);
        let newColor =
          filteredColors[
            Math.floor(Math.floor(Math.random() * filteredColors.length))
          ];
        //   console.log("newColor",newColor);
        console.log("currentColor",currentColor);
        card.classList.replace(currentColor!, newColor);
        //  console.log("cliecked",card.classList);
    }
  </script>

<div
  class={` p-5 lg:p-0 w-full lg:h-[400px] lg:w-1/2 lg:border-black lg:border-4 chamaleon ${defaultColor}`}
>
  <div class=`m-2 flex flex-col  justify-between items-center `>
    <div class="border-b-4 flex justify-start h-64 border-black border-4 font-semibold">
      {image && <Image src={image} alt={title} />}
    </div>
    <div class=`mt-4 font-semibold`>
      <h4 class="text-2xl  md:text-3xl font-extrabold">{title}</h4>
      <p class="md:text-xl md:my-2">{desp}</p>
      <section class="md:text-xl">
        <div class="flex">
          <a
            target="_blank"
            class=`p-2 my-1 flex items-center text-white bg-black`
            href={visit}
            >Visit <svg
              class="ml-1"
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="#ffffff"
              viewBox="0 0 256 256"
              ><path
                d="M224,104a8,8,0,0,1-16,0V59.32l-66.33,66.34a8,8,0,0,1-11.32-11.32L196.68,48H152a8,8,0,0,1,0-16h64a8,8,0,0,1,8,8Zm-40,24a8,8,0,0,0-8,8v72H48V80h72a8,8,0,0,0,0-16H48A16,16,0,0,0,32,80V208a16,16,0,0,0,16,16H176a16,16,0,0,0,16-16V136A8,8,0,0,0,184,128Z"
              ></path></svg
            ></a
          >
          <a
            target="_blank"
            class="p-2 m-1 md:mx-3 flex items-center text-white bg-black"
            href={git}
            >Github<svg
              class="ml-1"
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="#ffffff"
              viewBox="0 0 256 256"
              ><path
                d="M224,104a8,8,0,0,1-16,0V59.32l-66.33,66.34a8,8,0,0,1-11.32-11.32L196.68,48H152a8,8,0,0,1,0-16h64a8,8,0,0,1,8,8Zm-40,24a8,8,0,0,0-8,8v72H48V80h72a8,8,0,0,0,0-16H48A16,16,0,0,0,32,80V208a16,16,0,0,0,16,16H176a16,16,0,0,0,16-16V136A8,8,0,0,0,184,128Z"
              ></path></svg
            ></a
          >
        </div>
        <a
          class="p-2 w-fit md:my-3 border border-black flex items-center text-black bg-white"
          href={readmore}
          >Read more<svg
            class="ml-1"
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            fill="#000000"
            viewBox="0 0 256 256"
            ><path
              d="M224,48H160a40,40,0,0,0-32,16A40,40,0,0,0,96,48H32A16,16,0,0,0,16,64V192a16,16,0,0,0,16,16H96a24,24,0,0,1,24,24,8,8,0,0,0,16,0,24,24,0,0,1,24-24h64a16,16,0,0,0,16-16V64A16,16,0,0,0,224,48ZM96,192H32V64H96a24,24,0,0,1,24,24V200A39.81,39.81,0,0,0,96,192Zm128,0H160a39.81,39.81,0,0,0-24,8V88a24,24,0,0,1,24-24h64Z"
            ></path></svg
          ></a
        >
      </section>
      <div class="my-2 flex flex-wrap">
        {tags.map((tag: string) => <Tags text={tag} />)}
      </div>
    </div>
  </div>
</div>
<hr class="border-black border-4 w-full h-1 lg:hidden" />
